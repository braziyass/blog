spring:
  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/blog}
    username: ${SPRING_DATASOURCE_USERNAME:postgres}
    password: ${SPRING_DATASOURCE_PASSWORD:yassine2004}
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: update #create-drop
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.PostgreSQLDialect
    database: POSTGRESQL
    database-platform: org.hibernate.dialect.PostgreSQLDialect

  # Mail configuration for Mailtrap
  mail:
    host: ${SPRING_MAIL_HOST:live.smtp.mailtrap.io}
    port: ${SPRING_MAIL_PORT:587}
    username: ${SPRING_MAIL_USERNAME:api}
    password: ${SPRING_MAIL_PASSWORD}
    from: ${SPRING_MAIL_FROM:no-reply@braziyas.dev}
    from-name: ${SPRING_MAIL_FROM_NAME:Brazi yassine}
    test-connection: false
    enabled: ${SPRING_MAIL_ENABLED:true}
    properties:
      mail:
        debug: ${SPRING_MAIL_DEBUG:false}
        smtp:
          auth: true
          starttls:
            enable: true
          connectiontimeout: 5000
          timeout: 5000
          writetimeout: 5000
          from: ${SPRING_MAIL_FROM:no-reply@braziyas.dev}

  # Redis configuration: use full URI (supports username:password in the URI)
  redis:
    # Prefer host/port provided by docker-compose; URL optional via env
    host: ${SPRING_REDIS_HOST:localhost}
    port: ${SPRING_REDIS_PORT:6379}
    password: ${SPRING_REDIS_PASSWORD:}
    # Optional full URL if you want to override host/port (leave empty in Docker)
    url: ${SPRING_REDIS_URL:}
    timeout: 60000

  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.mail.MailSenderValidatorAutoConfiguration